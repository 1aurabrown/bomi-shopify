{% comment %}
csspurge whitelist
md:col-start-1
md:col-start-2
md:col-start-3
md:col-start-4
md:col-start-5

md:col-end-9
md:col-end-10
md:col-end-11
md:col-end-12
md:col-end-13
{% endcomment %}

{% liquid
  assign text = section.settings.text | default: section.settings.url.object.title
  assign half_width = section.settings.desktop_col_span | divided_by: 2
  assign start = 6 | minus: half_width | plus: 1
  assign end = 6 | plus: half_width | plus: 1
%}

<div class="pt-15 mb-25 lg:mb-35 padding-x md:grid md:grid-cols-12">
  <div class="w-full md:col-start-{{ start }} md:col-end-{{ end }}">
    {% if section.settings.url != blank %}
      <a class="block" href="{{ section.settings.url }}" title="{{ text }}">
    {% endif %}

      <figure>
        {% if section.settings.image %}
          {% capture class %}
              w-full{% if section.settings.mobile_image %} hidden md:block{% endif %}
          {% endcapture %}
          {% render 'image',
            image: section.settings.image,
            preload: true,
            use_padding: false,
            class: class,
            fit: 'cover',
            sizes: '(min-width: 768px) 33vw, 100vw',
          %}
        {% endif %}

        {% if section.settings.mobile_image %}
          {% capture class %}
            w-full{% if section.settings.image %} md:hidden{% endif %}
          {% endcapture %}
          {% render 'image',
            image: section.settings.mobile_image,
            preload: true,
            use_padding: false,
            class: class,
            fit: 'cover',
            sizes: '(min-width: 768px) 33vw, 100vw',
          %}
        {% endif %}

        <figcaption class="block uppercase hover:underline mt-gutter">{{ text }}</figcaption>
      </figure>

    {% if section.settings.url != blank %}
      </a>
    {% endif %}
  </div>
</div>

{% schema %}
{
  "name": "Hero",
  "tag": "section",
  "enabled_on": {
    "templates": [
      "index"
    ]
  },
  "settings": [
    {
      "label": "Image",
      "id": "image",
      "type": "image_picker"
    },
    {
      "label": "Mobile Image",
      "id": "mobile_image",
      "type": "image_picker"
    },
    {
      "type": "range",
      "id": "desktop_col_span",
      "label": "Desktop Column Span",
      "min": 4,
      "max": 12,
      "step": 2,
      "default": 8
    },
    {
      "type": "text",
      "id": "text",
      "label": "Text",
      "info": "Defaults to linked object's title."
    },
    {
      "type": "url",
      "id": "url",
      "label": "Link"
    }
  ],
  "presets": [
    {
      "name": "Hero",
      "category": "Homepage"
    }
  ]
}
{% endschema %}
